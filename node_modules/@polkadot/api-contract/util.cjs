"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.formatData = formatData;
exports.applyOnEvent = applyOnEvent;
exports.isOptions = isOptions;
exports.extractOptions = extractOptions;

var _create = require("@polkadot/types/create");

var _util = require("@polkadot/util");

// Copyright 2017-2021 @polkadot/rpc-contract authors & contributors
// SPDX-License-Identifier: Apache-2.0
function formatData(registry, data, {
  type
}) {
  return (0, _create.createTypeUnsafe)(registry, type, [data], {
    isPedantic: true
  });
}

function applyOnEvent(result, types, fn) {
  if (result.isInBlock || result.isFinalized) {
    const records = result.filterRecords('contracts', types);

    if (records.length) {
      return fn(records);
    }
  }

  return undefined;
}

function isOptions(options) {
  return !((0, _util.isBn)(options) || (0, _util.isBigInt)(options) || (0, _util.isNumber)(options) || (0, _util.isString)(options));
}

function extractOptions(value, params) {
  const gasLimit = params.shift();
  return [{
    gasLimit,
    value
  }, params];
}